/*
 * This file was generated by the Gradle 'init' task.
 *
 * This is a general purpose Gradle build.
 * Learn how to create Gradle builds at https://guides.gradle.org/creating-new-gradle-builds/
 */
apply plugin: 'java'

group = 'com.ibm.cloud_garage'
version = '0.1.0'

ext {
    springVersion = '5.0.9.RELEASE'
    jacksonVersion = '2.9.6'
    junitVersion = '5.2.0'
    mockitoVersion = '1.10.19'
    powermockMockitoVersion = '1.7.4'
}

dependencies {
    compile group: 'org.springframework', name: 'spring-web', version: springVersion
    compile group: 'org.springframework', name: 'spring-context', version: springVersion
    testCompile group: 'org.springframework', name: 'spring-test', version: springVersion

    compile group: 'org.springframework.boot', name: 'spring-boot', version: '2.0.5.RELEASE'
    compile group: 'org.apache.httpcomponents', name: 'httpclient', version: '4.5.6'
    compileOnly group: 'javax.servlet', name: 'javax.servlet-api', version: '4.0.1'
    testCompile group: 'javax.servlet', name: 'javax.servlet-api', version: '4.0.1'

    compile group: 'io.springfox', name: 'springfox-swagger2', version: '2.9.2'

    compile group: 'org.slf4j', name: 'slf4j-api', version: '1.7.25'
    compile group: 'com.fasterxml.jackson.core', name: 'jackson-core', version: jacksonVersion
    compile group: 'com.fasterxml.jackson.core', name: 'jackson-databind', version: jacksonVersion
    compile group: 'com.fasterxml.jackson.core', name: 'jackson-annotations', version: jacksonVersion

    testCompile("org.mockito:mockito-all:${mockitoVersion}")
    testCompile("org.powermock:powermock-api-mockito:${powermockMockitoVersion}")
    testCompile("org.powermock:powermock-module-junit4:${powermockMockitoVersion}")
    testImplementation(
            "org.junit.jupiter:junit-jupiter-api:${junitVersion}"
    )
    testRuntimeOnly(
            "org.junit.jupiter:junit-jupiter-engine:${junitVersion}"
    )
}

repositories {
    mavenCentral()
}

test {
    useJUnitPlatform {
        excludeTags "integration"
    }

    reports {
        junitXml.enabled = true
        html.enabled = true
    }
}

task integrationTest(type: Test) {
    useJUnitPlatform {
        includeTags "integration"
    }

    reports {
        junitXml.enabled = true
        html.enabled = true
    }
}
